<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아두이노이드 교실 4주차 1회차 교재: LCD와 RTC 모듈</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        h3 {
            color: #2980b9;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        ul {
            list-style-type: disc;
            margin-left: 20px;
        }
        ol {
            list-style-type: decimal;
            margin-left: 20px;
        }
        b {
            color: #e74c3c; /* 강조 색상 */
        }
        pre {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        .note {
            background-color: #fdf6e3;
            border-left: 4px solid #f39c12;
            padding: 10px;
            margin: 15px 0;
        }
        .project-idea {
            background-color: #e8f6f3;
            border-left: 4px solid #1abc9c;
            padding: 10px;
            margin: 15px 0;
        }
        .task {
            background-color: #e0f2f7;
            border-left: 4px solid #3498db;
            padding: 10px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 아두이노이드 교실 4주차 1회차 교재: LCD와 RTC 모듈</h1>

        <hr>

        <h2>💡 오늘의 목표</h2>
        <ul>
            <li><b>LCD(Liquid Crystal Display) 화면</b>의 종류와 정보를 표시하는 방법을 배워요.</li>
            <li>복잡한 연결을 줄여주는 <b>I2C 통신 방식</b>을 이해하고 활용해요.</li>
            <li><b>RTC(Real Time Clock) 모듈</b>의 원리를 이해하고 현재 시간을 읽어와요.</li>
            <li>LCD와 RTC 모듈을 조합하여 <b>'디지털 시계'</b>를 만들어봐요!</li>
        </ul>

        <hr>

        <h2>🖥️ 1. LCD 화면: 아두이노의 디스플레이!</h2>
        <p>지금까지 아두이노가 무엇을 감지하고 어떤 일을 하는지 시리얼 모니터로만 확인했어요. 하지만 시리얼 모니터 없이도 아두이노가 직접 정보를 보여줄 수 있다면 어떨까요? 바로 **LCD(Liquid Crystal Display) 화면**을 사용하면 가능해요!</p>
        <p>우리가 가장 많이 사용하는 LCD는 '1602 LCD'라고 부르는 16글자 2줄짜리 화면이에요. 여기에 글자나 숫자를 표시할 수 있답니다. 아두이노 프로젝트에 작은 정보를 표시할 때 아주 유용하게 사용돼요.</p>

        <h3>LCD 화면의 연결 문제:</h3>
        <p>일반적인 1602 LCD는 아두이노와 연결해야 하는 핀이 너무 많아요 (16개!). 이렇게 많은 선을 연결하는 건 복잡하고 힘들겠죠? 그래서 우리는 **I2C 변환 모듈이 붙어있는 LCD**를 사용할 거예요. 이 모듈이 있으면 단 4개의 선만으로 LCD를 아두이노에 연결할 수 있답니다!</p>

        <hr>

        <h2>🔄 2. I2C 통신: 4개의 선으로 연결하는 마법!</h2>
        <p>**I2C(Inter-Integrated Circuit)**는 여러 개의 장치를 단 2개의 데이터 선과 2개의 전원 선(총 4개)으로 연결하여 서로 통신하게 하는 특별한 방법이에요. 마치 여러 친구가 하나의 전화선을 공유하면서 서로에게 메시지를 보내는 것과 비슷하죠. LCD 외에도 다양한 센서나 모듈들이 이 I2C 통신 방식을 사용해요.</p>

        <h3>I2C 통신 핀:</h3>
        <ul>
            <li><b>VCC</b>: 전원 (+5V)</li>
            <li><b>GND</b>: 접지 (-)</li>
            <li><b>SDA (Serial Data Line)</b>: 데이터를 주고받는 선. 아두이노의 아날로그 핀 **A4**에 연결해요.</li>
            <li><b>SCL (Serial Clock Line)</b>: 데이터 전송 시간을 동기화하는 클럭 선. 아두이노의 아날로그 핀 **A5**에 연결해요.</li>
        </ul>
        <p class="note"><b>팁!</b> 아두이노 우노 보드에는 SDA/SCL 전용 핀이 따로 없지만, A4와 A5 핀이 이 역할을 겸하고 있어요.</p>

        <hr>

        <h2>⏰ 3. RTC 모듈: 꺼져도 시간을 기억해요!</h2>
        <p>아두이노는 전원이 꺼지면 현재 시간을 잊어버려요. 컴퓨터처럼 항상 정확한 시간을 유지하고 싶다면 **RTC(Real Time Clock) 모듈**이 필요해요. RTC 모듈은 아주 작은 건전지(코인 배터리)를 내장하고 있어서 아두이노의 전원이 꺼져도 시간을 계속해서 세고 있답니다.</p>
        <p>우리가 사용할 RTC 모듈은 **DS3231** 또는 **DS1307**이에요. 이 모듈도 LCD와 마찬가지로 **I2C 통신**을 사용하기 때문에, LCD와 함께 아두이노의 A4, A5 핀에 연결하여 사용할 수 있어요.</p>

        <h3>RTC 모듈의 역할:</h3>
        <ul>
            <li>현재 날짜와 시간(년, 월, 일, 요일, 시, 분, 초)을 정확하게 기록하고 제공해요.</li>
            <li>작은 건전지로 작동하여 메인 전원이 없어도 시간을 유지해요.</li>
        </ul>

        <hr>

        <h2>🛠️ 4. 회로 연결 및 코딩 준비</h2>

        **준비물:**
        <ul>
            <li>아두이노 우노 보드</li>
            <li>USB 케이블</li>
            <li>브레드보드 (선택 사항, 여러 모듈을 연결할 때 유용)</li>
            <li>점퍼선 (수-수)</li>
            <li>1602 LCD (I2C 모듈이 붙어있는 형태) 1개</li>
            <li>RTC 모듈 (DS3231 또는 DS1307) 1개 (코인 배터리 포함 또는 별도 구매)</li>
        </ul>

        <h3>회로 연결:</h3>
        <p>I2C 통신은 여러 장치를 병렬로 연결할 수 있어요. LCD와 RTC 모듈을 아두이노에 다음과 같이 연결해요.</p>
        <ol>
            <li><b>LCD (I2C) 연결</b>:
                <ul>
                    <li>LCD 모듈의 <b>GND 핀</b>을 아두이노의 <b>GND 핀</b>에 연결해요.</li>
                    <li>LCD 모듈의 <b>VCC 핀</b>을 아두이노의 <b>5V 핀</b>에 연결해요.</li>
                    <li>LCD 모듈의 <b>SDA 핀</b>을 아두이노의 <b>A4 핀</b>에 연결해요.</li>
                    <li>LCD 모듈의 <b>SCL 핀</b>을 아두이노의 <b>A5 핀</b>에 연결해요.</li>
                </ul>
            </li>
            <li><b>RTC 모듈 연결</b>:
                <ul>
                    <li>RTC 모듈의 <b>GND 핀</b>을 아두이노의 <b>GND 핀</b>에 연결해요. (LCD와 공통 GND에 연결되어도 됨)</li>
                    <li>RTC 모듈의 <b>VCC 핀</b>을 아두이노의 <b>5V 핀</b>에 연결해요. (LCD와 공통 5V에 연결되어도 됨)</li>
                    <li>RTC 모듈의 <b>SDA 핀</b>을 아두이노의 <b>A4 핀</b>에 연결해요. (LCD의 SDA 핀과 함께 연결)</li>
                    <li>RTC 모듈의 <b>SCL 핀</b>을 아두이노의 <b>A5 핀</b>에 연결해요. (LCD의 SCL 핀과 함께 연결)</li>
                </ul>
            </li>
        </ol>
        <p><i>(이 부분에는 I2C LCD와 RTC 모듈이 아두이노의 A4, A5, 5V, GND 핀에 각각 연결된 회로도 이미지를 넣어주시면 좋습니다. 특히 I2C 모듈의 핀 배치도를 함께 보여주는 것이 좋아요.)</i></p>

        <h3>코딩 준비: 라이브러리 추가</h3>
        <p>LCD와 RTC 모듈을 쉽게 제어하려면 각각의 라이브러리가 필요해요.</p>
        <ol>
            <li><b>LCD 라이브러리</b>:
                <ul>
                    <li>아두이노 IDE 메뉴에서 `스케치(Sketch)` → `라이브러리 포함하기(Include Library)` → `라이브러리 관리...(Manage Libraries...)`를 클릭해요.</li>
                    <li>검색창에 "Liquid Crystal I2C"라고 입력하고, `LiquidCrystal I2C by Frank de Brabander`를 찾아 설치해요.</li>
                </ul>
            </li>
            <li><b>RTC 라이브러리</b>:
                <ul>
                    <li>라이브러리 매니저에서 "RTC DS1307" 또는 "RTC DS3231" (사용하는 모듈에 따라)을 검색하고, `RTClib by Adafruit` 라이브러리를 설치해요. 이 라이브러리는 DS1307과 DS3231 모두를 지원해요.</li>
                </ul>
            </li>
        </ol>
        <p class="note"><b>팁!</b> RTC 모듈에 처음 전원을 연결하면 시간이 정확하지 않을 수 있어요. 초기에는 아두이노 코드를 이용해서 현재 컴퓨터 시간을 RTC 모듈에 한 번 설정해 주어야 해요.</p>

        <hr>

        <h2>🕰️ 5. 프로젝트: 아두이노 디지털 시계 만들기</h2>
        <p>이제 LCD와 RTC 모듈을 활용하여 현재 날짜와 시간을 LCD 화면에 표시하는 '디지털 시계'를 만들어 볼 거예요.</p>

        <h3>아이디어:</h3>
        1.  아두이노가 RTC 모듈로부터 현재 날짜와 시간을 읽어와요.
        2.  읽어온 날짜와 시간을 LCD 화면에 깔끔하게 표시해요.
        3.  매 초마다 시간이 업데이트되도록 해요.

        <h3>코딩하기:</h3>
        <p>아래 코드를 아두이노 IDE에 붙여 넣고 업로드해 보세요.</p>
        <pre><code>#include &lt;Wire.h&gt;         // I2C 통신 라이브러리 (필수!)
#include &lt;LiquidCrystal_I2C.h&gt; // LCD I2C 라이브러리
#include &lt;RTClib.h&gt;         // RTC 모듈 라이브러리

// LCD 설정 (주소, 열 개수, 행 개수)
// LCD 주소는 모듈마다 다를 수 있습니다. 보통 0x27 또는 0x3F 입니다.
// 만약 LCD에 글씨가 안 나오면 스케치 -> 예제 -> Wire -> i2c_scanner 를 업로드하여 LCD의 정확한 주소를 찾아야 해요.
LiquidCrystal_I2C lcd(0x27, 16, 2); // 0x27은 가장 일반적인 주소, 16열 2행 LCD

// RTC 객체 생성 (DS3231 또는 DS1307에 맞게 선택)
// RTC_DS3231 rtc; // DS3231 모듈을 사용하는 경우
RTC_DS1307 rtc; // DS1307 모듈을 사용하는 경우 (DS1307이 더 흔함)

void setup() {
  Serial.begin(9600); // 시리얼 통신 시작

  // I2C 통신 시작
  Wire.begin();

  // LCD 초기화
  lcd.init();
  lcd.backlight(); // 백라이트 켜기
  lcd.print("Hello, Arduino!");
  lcd.setCursor(0, 1); // 0열, 1행 (두 번째 줄)
  lcd.print("Loading...");
  delay(2000);
  lcd.clear();

  // RTC 모듈 초기화 및 시간 설정
  if (!rtc.begin()) {
    Serial.println("RTC 모듈을 찾을 수 없습니다.");
    while (1); // RTC가 없으면 무한 대기
  }

  // 이 부분은 RTC 시간을 처음 설정할 때만 사용합니다.
  // 아두이노에 코드를 업로드하는 컴퓨터의 현재 시간을 RTC 모듈에 기록해요.
  // 딱 한 번만 주석을 풀고 업로드한 다음, 다시 주석 처리하고 업로드해야 해요.
  // 그렇지 않으면 아두이노가 리셋될 때마다 시간이 초기화됩니다.
  // rtc.adjust(DateTime(F(__DATE__), F(__TIME__))); // 컴퓨터 빌드 시간으로 설정
  // rtc.adjust(DateTime(2025, 6, 29, 13, 30, 0)); // 특정 시간으로 설정 (년,월,일,시,분,초)

  Serial.println("디지털 시계 준비 완료!");
}

void loop() {
  DateTime now = rtc.now(); // RTC 모듈에서 현재 시간 읽어오기

  // 첫 번째 줄에 날짜 표시 (YYYY/MM/DD)
  lcd.setCursor(0, 0); // 0열, 0행 (첫 번째 줄)
  lcd.print(now.year());
  lcd.print("/");
  lcd.print(now.month());
  lcd.print("/");
  lcd.print(now.day());

  // 두 번째 줄에 시간 표시 (HH:MM:SS)
  lcd.setCursor(0, 1); // 0열, 1행 (두 번째 줄)
  if (now.hour() < 10) lcd.print('0'); // 10시 미만이면 앞에 0 붙이기
  lcd.print(now.hour());
  lcd.print(":");
  if (now.minute() < 10) lcd.print('0'); // 10분 미만이면 앞에 0 붙이기
  lcd.print(now.minute());
  lcd.print(":");
  if (now.second() < 10) lcd.print('0'); // 10초 미만이면 앞에 0 붙이기
  lcd.print(now.second());

  // 시리얼 모니터에도 시간 출력 (디버깅용)
  Serial.print(now.year(), DEC);
  Serial.print('/');
  Serial.print(now.month(), DEC);
  Serial.print('/');
  Serial.print(now.day(), DEC);
  Serial.print(" (");
  // 요일 표시
  char daysOfTheWeek[7][4] = {"일", "월", "화", "수", "목", "금", "토"}; // 한글 요일
  Serial.print(daysOfTheWeek[now.dayOfTheWeek()]);
  Serial.print(") ");
  if (now.hour() < 10) Serial.print('0');
  Serial.print(now.hour(), DEC);
  Serial.print(':');
  if (now.minute() < 10) Serial.print('0');
  Serial.print(now.minute(), DEC);
  Serial.print(':');
  if (now.second() < 10) Serial.print('0');
  Serial.print(now.second(), DEC);
  Serial.println();

  delay(1000); // 1초마다 업데이트
}
