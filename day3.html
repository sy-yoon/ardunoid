<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아두이노이드 교실 2주차 1회차 교재: 아날로그 센서 활용 및 데이터 맵핑</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        h3 {
            color: #2980b9;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        ul {
            list-style-type: disc;
            margin-left: 20px;
        }
        ol {
            list-style-type: decimal;
            margin-left: 20px;
        }
        b {
            color: #e74c3c; /* 강조 색상 */
        }
        pre {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        .note {
            background-color: #fdf6e3;
            border-left: 4px solid #f39c12;
            padding: 10px;
            margin: 15px 0;
        }
        .project-idea {
            background-color: #e8f6f3;
            border-left: 4px solid #1abc9c;
            padding: 10px;
            margin: 15px 0;
        }
        .task {
            background-color: #e0f2f7;
            border-left: 4px solid #3498db;
            padding: 10px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 아두이노이드 교실 2주차 1회차 교재: 아날로그 센서 활용 및 데이터 맵핑</h1>

        <hr>

        <h2>💡 오늘의 목표</h2>
        <ul>
            <li><b>조도 센서(CDS)</b>와 <b>가변 저항</b>처럼 아날로그 값을 감지하는 센서를 알아봐요.</li>
            <li>아두이노의 <b>아날로그 핀</b>에서 센서 값을 읽어오는 방법을 배워요.</li>
            <li>센서 값을 원하는 범위로 <b>'맵핑(Mapping)'</b>하는 방법을 이해해요.</li>
            <li>아두이노와 컴퓨터가 숫자를 주고받는 <b>시리얼 통신</b>을 사용해 봐요.</li>
            <li>배운 내용을 활용해서 <b>'스마트 밝기 조절 스탠드'</b>를 만들어봐요!</li>
        </ul>

        <hr>

        <h2>🔍 1. 아날로그 센서: 세상의 섬세한 변화 감지하기</h2>
        <p>지난 시간에는 버튼처럼 '눌렸다/안 눌렸다'의 두 가지 상태만 알려주는 **디지털 입력**을 배웠어요. 하지만 세상의 많은 정보는 이렇게 단순하지 않죠? 빛의 밝기, 온도의 변화, 소리의 크기 등은 수많은 값으로 이루어져 있어요.</p>
        <p>이런 다양하고 연속적인 값을 감지하는 센서를 **아날로그 센서**라고 불러요. 아두이노는 아날로그 센서가 보내는 전기 신호의 변화를 읽어서 그 값을 숫자로 바꿔준답니다.</p>

        <h3>조도 센서 (CDS 센서): 빛을 읽는 눈</h3>
        <p><b>조도 센서(CdS, 황화카드뮴)</b>는 주변의 빛의 밝기를 감지하는 센서예요. 빛이 밝으면 저항값이 작아지고, 어두우면 저항값이 커지는 특징을 가지고 있어요. 이 저항값의 변화를 아두이노가 읽어 들여 빛의 밝기를 알 수 있죠.</p>

        <h3>가변 저항: 손으로 조절하는 스위치</h3>
        <p><b>가변 저항(Potentiometer)</b>은 손잡이를 돌리거나 밀어서 전기 저항값을 변화시킬 수 있는 부품이에요. 라디오의 소리 크기 조절 다이얼, 스탠드의 밝기 조절 스위치 등에 사용되는 것과 비슷하답니다. 아두이노는 가변 저항의 저항값 변화를 아날로그 값으로 읽어서 다양한 제어에 활용할 수 있어요.</p>

        <hr>

        <h2>💻 2. 시리얼 통신: 아두이노와 컴퓨터의 대화</h2>
        <p>아두이노가 센서 값을 읽어도, 그 값을 우리가 눈으로 보지 못하면 제대로 작동하는지 알기 어렵겠죠? 이때 필요한 것이 바로 <b>시리얼 통신(Serial Communication)</b>이에요.</p>
        <p>시리얼 통신은 아두이노와 컴퓨터(아두이노 IDE의 시리얼 모니터)가 데이터를 주고받는 방법이에요. 아두이노가 읽은 센서 값을 컴퓨터 화면에 숫자로 보여줄 수 있답니다. 마치 아두이노가 우리에게 "지금 빛의 밝기는 500이야!"라고 말해주는 것과 같아요.</p>

        <hr>

        <h2>🛠️ 3. 회로 연결 및 아날로그 값 읽기</h2>

        **준비물:**
        <ul>
            <li>아두이노 우노 보드</li>
            <li>USB 케이블</li>
            <li>브레드보드</li>
            <li>점퍼선 (수-수)</li>
            <li>LED 1개</li>
            <li>저항 1개 (220옴 또는 330옴, LED용)</li>
            <li>저항 1개 (10K옴, 조도 센서용)</li>
            <li>조도 센서 (CDS) 1개</li>
            <li>가변 저항 1개</li>
        </ul>

        <h3>회로 연결 (조도 센서와 가변 저항):</h3>
        <ol>
            <li><b>조도 센서 연결</b>:
                <ul>
                    <li>조도 센서 다리 하나를 아두이노의 <b>5V 핀</b>에 연결해요.</li>
                    <li>다른 다리를 <b>10K옴 저항</b>과 연결하고, 이 저항의 다른 쪽을 <b>GND 핀</b>에 연결해요.</li>
                    <li>조도 센서와 10K옴 저항이 만나는 지점을 아두이노의 <b>아날로그 핀 A0</b>에 연결해요.</li>
                </ul>
            </li>
            <li><b>가변 저항 연결</b>:
                <ul>
                    <li>가변 저항 다리 3개 중 한쪽 끝 다리를 아두이노의 <b>5V 핀</b>에 연결해요.</li>
                    <li>다른 쪽 끝 다리를 아두이노의 <b>GND 핀</b>에 연결해요.</li>
                    <li>가운데 다리를 아두이노의 <b>아날로그 핀 A1</b>에 연결해요.</li>
                </ul>
            </li>
            <li><b>LED 연결 (지난 시간과 동일)</b>:
                <ul>
                    <li>LED의 긴 다리(+)를 220옴 저항에 연결하고, 저항의 다른 쪽 다리를 아두이노 <b>디지털 핀 9번</b>에 연결해요.</li>
                    <li>LED의 짧은 다리(-)를 아두이노 <b>GND 핀</b>에 연결해요.</li>
                </ul>
            </li>
        </ol>
        <p><i>(이 부분에는 조도 센서와 10K옴 저항, 가변 저항, 그리고 LED와 저항이 아두이노의 각 핀에 연결된 회로도 이미지를 넣어주시면 좋습니다.)</i></p>

        <h3>코딩하기: 센서 값 시리얼 모니터로 확인하기</h3>
        <p>이제 아두이노가 조도 센서와 가변 저항의 값을 읽어서 시리얼 모니터에 출력하도록 코딩해봐요.</p>
        <pre><code>// 핀 번호 정의
const int CDS_PIN = A0;   // 조도 센서가 연결된 아날로그 핀
const int POT_PIN = A1;   // 가변 저항이 연결된 아날로그 핀

void setup() {
  Serial.begin(9600); // 시리얼 통신 시작 (9600은 통신 속도)
  Serial.println("아날로그 센서 값 읽기 시작!");
}

void loop() {
  // 조도 센서 값 읽기 (0~1023 사이의 값)
  int cdsValue = analogRead(CDS_PIN);
  Serial.print("조도 센서 값: ");
  Serial.print(cdsValue); // 같은 줄에 출력

  // 가변 저항 값 읽기 (0~1023 사이의 값)
  int potValue = analogRead(POT_PIN);
  Serial.print(" | 가변 저항 값: ");
  Serial.println(potValue); // 다음 줄로 넘어가며 출력

  delay(100); // 0.1초마다 값 확인
}</code></pre>

        <h3>새로운 코드 설명:</h3>
        <ul>
            <li>`analogRead(핀번호)`: 아날로그 핀(A0~A5)의 값을 읽어오는 함수예요. 이 함수는 <b>0부터 1023까지의 숫자</b>를 반환해요. (디지털 `digitalRead`가 HIGH/LOW만 반환하는 것과 달라요!)</li>
            <li>`Serial.print()`: 시리얼 모니터에 내용을 출력하지만, `println()`과 달리 다음 줄로 넘어가지 않고 같은 줄에 계속 이어서 출력해요.</li>
            <li>`Serial.println()`: 시리얼 모니터에 내용을 출력하고 다음 줄로 넘어가요.</li>
        </ul>

        <h3>결과 확인:</h3>
        <ol>
            <li>아두이노 IDE에서 코드를 업로드합니다.</li>
            <li>오른쪽 위의 **시리얼 모니터**를 열어보세요.</li>
            <li>주변 밝기에 따라 조도 센서 값이 변하는지 확인해 보세요. (손으로 센서를 가려보거나 빛을 비춰보세요.)</li>
            <li>가변 저항 손잡이를 돌릴 때마다 값이 0부터 1023까지 변하는지 확인해 보세요.</li>
        </ol>

        <hr>

        <h2>📊 4. 데이터 맵핑(Mapping): 값의 변신!</h2>
        <p>아두이노의 `analogRead()` 함수는 값을 0~1023 사이로 읽어와요. 하지만 우리가 LED의 밝기를 조절할 때는 0~255 범위의 값을 사용했죠? 이렇게 한 범위의 숫자를 다른 범위의 숫자로 바꿔주는 것을 **맵핑(Mapping)**이라고 해요.</p>
        <p>아두이노에는 `map()`이라는 아주 편리한 함수가 있어요. 이 함수를 사용하면 값을 쉽게 변환할 수 있답니다.</p>
        <pre><code>map(값, 원래_최소값, 원래_최대값, 변환될_최소값, 변환될_최대값);</code></pre>
        <p>예를 들어, `map(cdsValue, 0, 1023, 0, 255)`는 조도 센서 값(0~1023)을 LED 밝기 값(0~255)으로 변환해 줘요.</p>

        <hr>

        <h2>💡 5. 프로젝트: 스마트 밝기 조절 스탠드 만들기</h2>
        <p>이제 조도 센서와 가변 저항, 그리고 맵핑 함수를 활용해서 스마트 밝기 조절 스탠드를 만들어 볼 거예요!</p>

        <h3>아이디어:</h3>
        1.  **조도 센서 모드**: 주변이 어두워지면 자동으로 LED 스탠드가 밝아지고, 밝아지면 어두워지게 해요.
        2.  **가변 저항 모드**: 가변 저항을 돌리면 LED 스탠드의 밝기가 수동으로 조절되게 해요.

        <h3>코딩하기:</h3>
        <p>아래 코드를 아두이노 IDE에 붙여 넣고 업로드해 보세요.</p>
        <pre><code>// 핀 번호 정의
const int CDS_PIN = A0;    // 조도 센서 아날로그 핀
const int POT_PIN = A1;    // 가변 저항 아날로그 핀
const int LED_PIN = 9;     // LED가 연결된 디지털 핀 (PWM 가능 핀)

void setup() {
  Serial.begin(9600);       // 시리얼 통신 시작
  pinMode(LED_PIN, OUTPUT); // LED 핀을 출력으로 설정
}

void loop() {
  // 1. 조도 센서를 이용한 자동 밝기 조절
  int cdsRawValue = analogRead(CDS_PIN); // 조도 센서 원본 값 읽기 (0~1023)
  // 센서 특성상 빛이 밝으면 값이 작아지므로, 뒤집어서 맵핑해요.
  // 맵핑 범위는 조도 센서의 실제 작동 범위에 따라 조절할 수 있어요.
  // 여기서는 어두울수록 LED가 밝아지도록 맵핑 (예: 200~800 -> 0~255)
  int cdsBrightness = map(cdsRawValue, 200, 800, 255, 0); // 맵핑! (200일 때 255, 800일 때 0)
  // 값의 범위를 벗어나지 않도록 강제로 조절
  cdsBrightness = constrain(cdsBrightness, 0, 255);

  Serial.print("CDS 원본: ");
  Serial.print(cdsRawValue);
  Serial.print(" | CDS 밝기(맵핑): ");
  Serial.print(cdsBrightness);

  // 2. 가변 저항을 이용한 수동 밝기 조절
  int potRawValue = analogRead(POT_PIN); // 가변 저항 원본 값 읽기 (0~1023)
  int potBrightness = map(potRawValue, 0, 1023, 0, 255); // 맵핑!

  Serial.print(" | POT 원본: ");
  Serial.print(potRawValue);
  Serial.print(" | POT 밝기(맵핑): ");
  Serial.println(potBrightness);

  // 여기서는 가변 저항 값이 500 이상일 때 가변 저항 모드,
  // 500 미만일 때 조도 센서 모드로 작동하게 합니다.
  // 실제 사용에서는 버튼 등을 이용해 모드를 전환하는 것이 더 좋아요.
  if (potRawValue > 500) {
    analogWrite(LED_PIN, potBrightness); // 가변 저항 값으로 LED 밝기 조절
  } else {
    analogWrite(LED_PIN, cdsBrightness); // 조도 센서 값으로 LED 밝기 조절
  }

  delay(50); // 짧게 기다려 센서 값 안정화
}
