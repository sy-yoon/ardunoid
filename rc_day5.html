<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아두이노 RC카 교실 5주차 교재: RC카 무선으로 조종하기 (블루투스 모듈)</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 20px;
            background-color: #f8f8f8;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 40px;
            font-size: 2.2em;
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
            margin-top: 35px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
            margin-bottom: 12px;
            font-size: 1.4em;
        }
        h4 {
            color: #1a5276;
            margin-top: 15px;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        ul {
            list-style-type: disc;
            margin-left: 25px;
            margin-bottom: 15px;
        }
        ol {
            list-style-type: decimal;
            margin-left: 25px;
            margin-bottom: 15px;
        }
        b {
            color: #e74c3c; /* 강조 색상 */
            font-weight: bold;
        }
        .highlight {
            background-color: #eaf6ff;
            padding: 2px 5px;
            border-radius: 3px;
        }
        pre {
            background-color: #ecf0f1;
            padding: 18px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.95em;
            margin-bottom: 20px;
            border: 1px solid #c0d8e8;
        }
        code {
            font-family: 'Consolas', 'Courier New', monospace;
            background-color: #e0e0e0;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .note {
            background-color: #fdf6e3;
            border-left: 5px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .project-idea {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .task {
            background-color: #e0f2f7;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .image-container {
            text-align: center;
            margin: 30px 0;
        }
        .image-container img {
            max-width: 90%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .caution {
            color: #c0392b;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 아두이노 RC카 교실 5주차 교재: RC카 무선으로 조종하기 (블루투스 모듈)</h1>

        <hr>

        <h2>💡 이번 주 학습 목표</h2>
        <ul>
            <li>RC카에 '무선 통신' 기능을 부여하는 **블루투스 모듈**의 원리를 이해해요.</li>
            <li>가장 흔히 사용되는 **HC-06 (또는 HC-05) 블루투스 모듈**을 아두이노와 연결하는 방법을 배워요.</li>
            <li>스마트폰 앱을 통해 아두이노로 데이터를 전송하고, RC카를 **무선으로 조종**하는 코드를 작성해요.</li>
            <li>블루투스 통신의 기본 개념인 **UART(시리얼 통신)**를 복습하고 활용해요.</li>
        </ul>

        <hr>

        <h2>1회차: 블루투스 통신 기초 및 HC-06/HC-05 연결</h2>

        <h3>📱 1. 블루투스 통신이란 무엇일까요?</h3>
        <p>**블루투스(Bluetooth)**는 스마트폰, 태블릿, 컴퓨터 등 다양한 기기들이 가까운 거리에서 무선으로 데이터를 주고받을 수 있게 해주는 기술이에요. RC카에 블루투스 모듈을 달면, 여러분의 스마트폰에서 보낸 명령으로 RC카를 움직일 수 있게 된답니다! 이제 더 이상 USB 케이블로 아두이노를 연결할 필요 없이, 마치 실제 RC카처럼 무선으로 조종할 수 있게 되는 거죠.</p>
        <p>RC카 프로젝트에서 주로 사용하는 블루투스 모듈은 **HC-06 (슬레이브 전용)** 또는 **HC-05 (마스터/슬레이브 겸용)** 모듈이에요. RC카를 스마트폰으로 조종할 때는 주로 스마트폰이 마스터, RC카의 블루투스 모듈이 슬레이브 역할을 합니다.</p>
        <div class="image-container">
            <img src="hc_06_bluetooth_module.png" alt="HC-06 블루투스 모듈 이미지">
            <p><i>(HC-06 또는 HC-05 블루투스 모듈의 실제 사진 또는 핀 명칭이 표시된 다이어그램을 삽입해 주세요. VCC, GND, TXD, RXD 핀이 표시되면 좋습니다.)</i></p>
        </div>

        <h4>블루투스 모듈 (HC-06/HC-05) 주요 핀:</h4>
        <ul>
            <li>**VCC**: 전원 공급 (5V)</li>
            <li>**GND**: 접지</li>
            <li>**TXD (Transmit Data)**: 아두이노에서 데이터를 받는 핀 (아두이노의 RX 핀과 연결)</li>
            <li>**RXD (Receive Data)**: 아두이노로 데이터를 보내는 핀 (아두이노의 TX 핀과 연결)</li>
            <li>**STATE (HC-05에 있음)**: 블루투스 연결 상태 표시</li>
            <li>**EN (HC-05에 있음)**: AT 명령 모드 진입용</li>
        </ul>

        <h3>🔌 2. 회로 연결하기: 블루투스 모듈과 아두이노 연결</h3>
        <p>블루투스 모듈은 아두이노와 **시리얼 통신(UART)** 방식으로 데이터를 주고받아요. 아두이노 우노에는 기본적으로 시리얼 통신을 위한 0번(RX), 1번(TX) 핀이 있지만, 이 핀들은 컴퓨터와 아두이노 간의 통신(시리얼 모니터, 업로드)에 사용되므로, 다른 디지털 핀을 가상의 시리얼 통신 핀으로 사용하는 것이 좋아요. 이를 위해 **SoftwareSerial 라이브러리**를 사용할 겁니다.</p>
        <h4>준비물:</h4>
        <ul>
            <li>아두이노 우노 보드</li>
            <li>브레드보드</li>
            <li>HC-06 또는 HC-05 블루투스 모듈 1개</li>
            <li>저항 2개 (1kΩ, 2kΩ 또는 1kΩ, 1.8kΩ) - **전압 분배 저항 (Voltage Divider)** 구성용 (TX -> RX 연결 시 필수)</li>
            <li>점퍼선 (수-수)</li>
        </ul>
        <h4>회로 연결 순서:</h4>
        <ol>
            <li>**브레드보드 전원 연결**:
                <ul>
                    <li>아두이노의 **GND 핀**에서 브레드보드의 **파란색 (-) 라인**에 연결합니다.</li>
                    <li>아두이노의 **5V 핀**에서 브레드보드의 **빨간색 (+) 라인**에 연결합니다.</li>
                </ul>
            </li>
            <li>**블루투스 모듈 전원 연결**:
                <ul>
                    <li>블루투스 모듈의 **VCC 핀**을 브레드보드의 **빨간색 (+) 라인(5V)**에 연결합니다.</li>
                    <li>블루투스 모듈의 **GND 핀**을 브레드보드의 **파란색 (-) 라인(GND)**에 연결합니다.</li>
                </ul>
            </li>
            <li>**블루투스 모듈 통신 핀 연결 (매우 중요!)**:
                <ul>
                    <li>**블루투스 모듈의 TXD 핀**을 아두이노의 **디지털 핀 10번 (RX로 사용)**에 연결합니다. (데이터 전송: 블루투스 -> 아두이노)</li>
                    <li>**블루투스 모듈의 RXD 핀**에 **저항 2개로 전압 분배 회로**를 구성하여 아두이노의 **디지털 핀 11번 (TX로 사용)**에 연결합니다. (데이터 수신: 아두이노 -> 블루투스)
                        <ul>
                            <li>아두이노 디지털 핀 11번 (TX)에서 1kΩ 저항을 연결합니다.</li>
                            <li>1kΩ 저항의 반대쪽 다리와 2kΩ (또는 1.8kΩ) 저항의 한쪽 다리를 한 점에 연결합니다. 이 점이 블루투스 모듈의 RXD 핀에 연결됩니다.</li>
                            <li>2kΩ (또는 1.8kΩ) 저항의 다른 쪽 다리는 브레드보드의 **GND**에 연결합니다.</li>
                        </ul>
                        <p>**설명**: 블루투스 모듈의 RXD 핀은 3.3V 전압만 받아들일 수 있는데, 아두이노의 디지털 핀은 5V 신호를 내보내기 때문에, 전압 분배 저항을 사용하여 5V를 3.3V로 낮춰주는 것입니다.</p>
                        <p>**HC-05/06 중 3.3V 변환 회로가 내장된 모듈은 저항 없이 바로 연결해도 되지만, 대부분 모듈에는 내장되어 있지 않으므로 위 전압 분배 회로가 필수입니다!**</p>
                    </li>
                </ul>
            </li>
        </ol>
        <div class="image-container">
            <img src="arduino_bluetooth_module_circuit.png" alt="아두이노 HC-06 블루투스 모듈 연결 회로도 (전압 분배 저항 포함)">
            <p><i>(아두이노, 브레드보드, HC-06/HC-05 블루투스 모듈, 1kΩ, 2kΩ 저항으로 구성된 전압 분배 회로가 명확히 표시된 회로도 이미지를 삽입해 주세요.)</i></p>
        </div>
        <p class="caution"><b>주의!</b> 블루투스 모듈의 RXD 핀에 아두이노 5V 신호를 직접 연결하면 모듈이 손상될 수 있습니다. 반드시 **전압 분배 저항**을 사용하거나 3.3V 호환 모듈인지 확인하세요.</p>
        <p class="caution">아두이노에 코드를 업로드할 때는 **블루투스 모듈의 RXD, TXD 핀 연결을 잠시 분리**하는 것이 좋아요. 그렇지 않으면 업로드가 실패할 수 있습니다.</p>

        <h3>📝 3. 코딩하기: 블루투스로 문자열 수신 및 시리얼 모니터 출력</h3>
        <p>블루투스 모듈을 통해 스마트폰에서 보낸 문자열을 아두이노가 수신하여 시리얼 모니터에 출력하는 예제예요.</p>
        <pre><code class="language-cpp">// 아두이노 RC카 교실 - 5주차 1회차: 블루투스 문자열 수신 예제

// SoftwareSerial 라이브러리 포함 (아두이노 IDE에 기본 포함되어 있어요)
#include &lt;SoftwareSerial.h&gt;

// 블루투스 모듈과 통신할 가상의 시리얼 핀 설정
// RX 핀(아두이노가 데이터 받는 핀)은 10번, TX 핀(아두이노가 데이터 보내는 핀)은 11번으로 지정
SoftwareSerial BTSerial(10, 11); // RX, TX

void setup() {
  Serial.begin(9600);    // 컴퓨터와 아두이노 간 시리얼 통신 시작
  Serial.println("블루투스 문자열 수신 대기...");

  BTSerial.begin(9600);  // 블루투스 모듈과 시리얼 통신 시작 (블루투스 모듈 기본 전송 속도)
  Serial.println("블루투스 모듈 연결 완료!");
}

void loop() {
  // 블루투스에서 데이터가 수신되었는지 확인
  if (BTSerial.available()) {
    // 수신된 데이터를 읽어서 시리얼 모니터에 출력
    char receivedChar = BTSerial.read(); // 한 글자씩 읽어오기
    Serial.print("블루투스 수신: ");
    Serial.println(receivedChar); // 수신된 문자 출력

    // 만약 여러 글자를 한 번에 읽고 싶다면
    // String receivedString = BTSerial.readStringUntil('\n'); // 개행 문자 전까지 읽기
    // Serial.println("블루투스 수신 문자열: " + receivedString);
  }
}
</code></pre>
        <h4>코딩 용어 상세 설명:</h4>
        <ul>
            <li><span class="highlight"><code>#include &lt;SoftwareSerial.h&gt;</code></span>: 아두이노의 기본 하드웨어 시리얼 핀(0, 1번) 외에 다른 디지털 핀을 시리얼 통신용으로 사용할 수 있게 해주는 라이브러리입니다.</li>
            <li><span class="highlight"><code>SoftwareSerial BTSerial(10, 11);</code></span>: <code>SoftwareSerial</code> 객체를 생성합니다. 첫 번째 인자(<code>10</code>)는 아두이노가 **수신(RX)**하는 핀 (블루투스 모듈의 TXD와 연결), 두 번째 인자(<code>11</code>)는 아두이노가 **송신(TX)**하는 핀 (블루투스 모듈의 RXD와 연결)입니다.</li>
            <li><span class="highlight"><code>BTSerial.begin(9600);</code></span>: <code>BTSerial</code> 객체의 통신 속도를 9600 보드레이트(bps)로 설정합니다. HC-06/HC-05 모듈의 기본 통신 속도는 보통 9600bps 또는 38400bps입니다. (모듈에 따라 다를 수 있으니 확인 필요)</li>
            <li><span class="highlight"><code>if (BTSerial.available())</code></span>: 블루투스 모듈로부터 수신된 데이터가 있는지 확인하는 함수입니다. 데이터가 있으면 <code>true</code>를 반환합니다.</li>
            <li><span class="highlight"><code>char receivedChar = BTSerial.read();</code></span>: 블루투스 모듈로부터 한 바이트(한 글자)의 데이터를 읽어와 <code>receivedChar</code> 변수에 저장합니다.</li>
        </ul>

        <h3>✅ 4. 결과 확인</h3>
        <ol>
            <li>아두이노에 코드를 업로드하기 전에 **블루투스 모듈의 RXD, TXD 핀 연결을 분리**합니다.</li>
            <li>코드를 업로드한 후, 다시 블루투스 모듈 핀을 연결합니다.</li>
            <li>스마트폰에 **"Arduino Bluetooth Controller"** 또는 유사한 시리얼 통신 앱을 설치합니다.</li>
            <li>앱을 실행하여 블루투스 장치 목록에서 여러분의 HC-06 (일반적으로 "HC-06" 또는 "linvor" 등으로 표시) 또는 HC-05 (보통 "HC-05")를 찾아 연결합니다. (최초 연결 시 비밀번호는 일반적으로 **'1234'** 또는 **'0000'** 입니다.)</li>
            <li>앱에서 텍스트를 입력하고 전송하여 아두이노 시리얼 모니터에 제대로 출력되는지 확인합니다.</li>
        </ol>
        <div class="project-idea">
            <h4>⭐ 스스로 해보기!</h4>
            <ul>
                <li>블루투스로 특정 문자를 보내면 아두이노의 내장 LED(13번 핀)를 켜고 끄도록 만들어 보세요. (예: '1'을 보내면 켜지고, '0'을 보내면 꺼지도록)</li>
                <li>아두이노에서 블루투스 모듈로 "Hello Bluetooth!"와 같은 메시지를 보내 스마트폰 앱에서 수신되는지 확인해 보세요. (<code>BTSerial.print()</code> 또는 <code>BTSerial.println()</code> 사용)</li>
            </ul>
        </div>

        <hr>
        <br>

        <h2>2회차: 블루투스 스마트폰 앱으로 RC카 조종하기</h2>

        <h3>🕹️ 1. 스마트폰 앱 구성 및 통신 프로토콜 정의</h3>
        <p>이제 RC카의 모든 기능(전진, 후진, 정지, 좌회전, 우회전, 속도 조절 등)을 스마트폰 앱으로 제어할 수 있도록 통합해 볼 거예요. 이를 위해 스마트폰 앱에서 어떤 문자를 보낼 때 RC카가 어떻게 동작할지 미리 **통신 프로토콜**을 정해야 해요.</p>
        <p>예시 프로토콜:</p>
        <ul>
            <li>'F' (Forward): 전진</li>
            <li>'B' (Backward): 후진</li>
            <li>'S' (Stop): 정지</li>
            <li>'L' (Left): 좌회전</li>
            <li>'R' (Right): 우회전</li>
            <li>'C' (Center): 조향 중앙</li>
            <li>'X' (Speed Up): 속도 증가</li>
            <li>'Z' (Speed Down): 속도 감소</li>
        </ul>
        <p>스마트폰 앱은 지난 시간에 설치했던 **"Arduino Bluetooth Controller"** 앱의 버튼 기능을 활용하거나, 직접 버튼을 설정할 수 있는 다른 터미널 앱을 사용합니다.</p>

        <h3>⚙️ 2. 통합 회로 연결: DC 모터, 서보 모터, 블루투스 모듈 연결</h3>
        <p>지난주에 연결했던 DC 모터, 서보 모터와 이번 주에 연결한 블루투스 모듈을 모두 아두이노에 연결합니다.</p>
        <h4>준비물:</h4>
        <ul>
            <li>아두이노 우노 보드</li>
            <li>L298N 모터 드라이버 모듈 1개</li>
            <li>DC 모터 2개</li>
            <li>서보 모터 1개 (SG90)</li>
            <li>HC-06 또는 HC-05 블루투스 모듈 1개</li>
            <li>저항 2개 (1kΩ, 2kΩ 또는 1kΩ, 1.8kΩ) - 블루투스 RXD용</li>
            <li>9V 건전지 및 건전지 스냅 (모터 드라이버용 외부 전원)</li>
            <li>점퍼선 (수-수)</li>
            <li>브레드보드 (선택 사항, 회로 정리에 도움)</li>
        </ul>
        <h4>회로 연결 순서:</h4>
        <ol>
            <li>**전원 및 접지 연결**:
                <ul>
                    <li>아두이노 GND -> L298N GND -> 블루투스 GND -> 서보 GND (모두 연결)</li>
                    <li>아두이노 5V -> 블루투스 VCC -> 서보 VCC (모두 연결)</li>
                    <li>9V 배터리 (+) -> L298N +12V</li>
                    <li>9V 배터리 (-) -> L298N GND (아두이노 GND와 이미 연결됨)</li>
                </ul>
            </li>
            <li>**DC 모터 연결 (L298N)**: (3주차 1회차와 동일)
                <ul>
                    <li>좌측 모터: OUT1, OUT2</li>
                    <li>우측 모터: OUT3, OUT4</li>
                    <li>아두이노 핀 7 -> IN1</li>
                    <li>아두이노 핀 6 -> IN2</li>
                    <li>아두이노 핀 5 -> IN3</li>
                    <li>아두이노 핀 4 -> IN4</li>
                    <li>아두이노 핀 9 (PWM) -> ENA (좌측 모터 속도)</li>
                    <li>아두이노 핀 10 (PWM) -> ENB (우측 모터 속도)</li>
                </ul>
            </li>
            <li>**서보 모터 연결**: (3주차 2회차와 동일)
                <ul>
                    <li>서보 신호선 -> 아두이노 핀 3</li>
                </ul>
            </li>
            <li>**블루투스 모듈 연결**: (5주차 1회차와 동일, **전압 분배 저항 필수!**)
                <ul>
                    <li>블루투스 TXD -> 아두이노 핀 10 (SoftwareSerial RX)</li>
                    <li>블루투스 RXD -> 전압 분배 저항 -> 아두이노 핀 11 (SoftwareSerial TX)</li>
                </ul>
            </li>
        </ol>
        <div class="image-container">
            <img src="arduino_rc_car_full_circuit.png" alt="아두이노 RC카 전체 회로도 (모터, 서보, 블루투스 통합)">
            <p><i>(아두이노, L298N, DC 모터 2개, 서보 모터, HC-06/HC-05 블루투스 모듈, 전압 분배 저항, 배터리가 모두 연결된 복잡한 전체 회로도 이미지를 삽입해 주세요.)</i></p>
        </div>
        <p class="caution"><b>주의!</b> 복잡한 회로이므로 핀 연결을 꼼꼼히 확인하세요. 특히 전원과 GND가 겹치지 않도록 주의하고, 블루투스 모듈 RXD 핀의 전압 분배 회로를 잊지 마세요.</p>

        <h3>📝 3. 코딩하기: 블루투스 앱으로 RC카 조종</h3>
        <p>이제 스마트폰 앱에서 받은 명령 문자를 해석하여 RC카의 움직임을 제어하는 코드를 작성할 거예요. 3주차에 만든 모터 제어 함수들을 활용합니다.</p>
        <pre><code class="language-cpp">// 아두이노 RC카 교실 - 5주차 2회차: 블루투스 앱으로 RC카 조종 예제

// Servo 라이브러리 포함 (서보 모터 제어용)
#include &lt;Servo.h&gt; 
// SoftwareSerial 라이브러리 포함 (블루투스 통신용)
#include &lt;SoftwareSerial.h&gt;

// ======= 모터 드라이버 핀 설정 (3주차 1회차와 동일) =======
const int motor1_IN1 = 7; 
const int motor1_IN2 = 6;
const int motor1_ENA = 9;  // PWM 핀

const int motor2_IN3 = 5;
const int motor2_IN4 = 4;
const int motor2_ENB = 10; // PWM 핀

int currentMotorSpeed = 150; // 초기 RC카 속도 (0~255)

// ======= 서보 모터 핀 설정 (3주차 2회차와 동일) =======
Servo myServo;
const int servoPin = 3;
int currentServoAngle = 90; // 초기 서보 모터 각도 (90도: 직진)

// ======= 블루투스 모듈 핀 설정 (5주차 1회차와 동일) =======
SoftwareSerial BTSerial(10, 11); // RX, TX (아두이노 핀 기준)

void setup() {
  Serial.begin(9600);
  Serial.println("RC카 블루투스 조종 시스템 시작!");

  // 모터 핀 설정
  pinMode(motor1_IN1, OUTPUT);
  pinMode(motor1_IN2, OUTPUT);
  pinMode(motor1_ENA, OUTPUT);
  pinMode(motor2_IN3, OUTPUT);
  pinMode(motor2_IN4, OUTPUT);
  pinMode(motor2_ENB, OUTPUT);
  stopMotors(); // 초기 모터 정지

  // 서보 모터 설정
  myServo.attach(servoPin);
  myServo.write(currentServoAngle); // 초기 각도로 설정

  // 블루투스 시리얼 통신 시작
  BTSerial.begin(9600); // 블루투스 모듈의 보드레이트에 맞춤
  Serial.println("블루투스 연결 대기 중...");
}

void loop() {
  // 블루투스에서 데이터가 수신되었는지 확인
  if (BTSerial.available()) {
    char command = BTSerial.read(); // 한 글자 명령 읽기
    Serial.print("수신 명령: ");
    Serial.println(command);

    // 수신된 명령에 따라 RC카 제어
    switch (command) {
      case 'F': // 전진
        moveForward();
        break;
      case 'B': // 후진
        moveBackward();
        break;
      case 'S': // 정지
        stopMotors();
        break;
      case 'L': // 좌회전 (서보 모터 각도 조절)
        currentServoAngle = 45; // 왼쪽으로 조향
        myServo.write(currentServoAngle);
        break;
      case 'R': // 우회전 (서보 모터 각도 조절)
        currentServoAngle = 135; // 오른쪽으로 조향
        myServo.write(currentServoAngle);
        break;
      case 'C': // 중앙 (서보 모터 각도 조절)
        currentServoAngle = 90; // 중앙으로 조향
        myServo.write(currentServoAngle);
        break;
      case 'X': // 속도 증가
        currentMotorSpeed += 20; // 20씩 증가
        if (currentMotorSpeed > 255) currentMotorSpeed = 255; // 최대 속도 제한
        Serial.print("속도 증가: "); Serial.println(currentMotorSpeed);
        // 현재 움직이는 방향에 따라 속도만 변경
        // (ex. 전진 중이었다면 전진 상태 유지하며 속도만 조절)
        // 만약 정지 상태였다면 속도만 변경되고 실제 움직임은 없음
        break;
      case 'Z': // 속도 감소
        currentMotorSpeed -= 20; // 20씩 감소
        if (currentMotorSpeed < 0) currentMotorSpeed = 0; // 최소 속도 제한
        Serial.print("속도 감소: "); Serial.println(currentMotorSpeed);
        break;
      default:
        // 알 수 없는 명령
        break;
    }
    // 명령이 실행된 후에는 잠시 대기하여 다음 명령을 기다립니다.
    delay(50); 
  }
}

// RC카 전진 함수
void moveForward() {
  digitalWrite(motor1_IN1, HIGH);
  digitalWrite(motor1_IN2, LOW);
  analogWrite(motor1_ENA, currentMotorSpeed);

  digitalWrite(motor2_IN3, HIGH); 
  digitalWrite(motor2_IN4, LOW);
  analogWrite(motor2_ENB, currentMotorSpeed);
  Serial.println("RC카 전진");
}

// RC카 후진 함수
void moveBackward() {
  digitalWrite(motor1_IN1, LOW);
  digitalWrite(motor1_IN2, HIGH);
  analogWrite(motor1_ENA, currentMotorSpeed);

  digitalWrite(motor2_IN3, LOW); 
  digitalWrite(motor2_IN4, HIGH);
  analogWrite(motor2_ENB, currentMotorSpeed);
  Serial.println("RC카 후진");
}

// RC카 정지 함수
void stopMotors() {
  digitalWrite(motor1_IN1, LOW);
  digitalWrite(motor1_IN2, LOW);
  analogWrite(motor1_ENA, 0); 

  digitalWrite(motor2_IN3, LOW);
  digitalWrite(motor2_IN4, LOW);
  analogWrite(motor2_ENB, 0); 
  Serial.println("RC카 정지");
}
</code></pre>
        <p class="note">**팁:** <code>analogWrite()</code>는 PWM 핀(<code>~</code>)에만 사용할 수 있습니다. 아두이노 우노의 경우 디지털 3, 5, 6, 9, 10, 11번 핀이 PWM을 지원합니다.</p>
        <h4>코딩 용어 상세 설명:</h4>
        <ul>
            <li><span class="highlight"><code>switch (command) { ... }</code></span>: <code>if-else if</code>문과 비슷하게, <code>command</code> 변수의 값에 따라 다른 코드를 실행하는 조건문이에요. 여러 개의 조건을 효율적으로 처리할 때 유용합니다.</li>
            <li><span class="highlight"><code>case 'F':</code></span>, <span class="highlight"><code>break;</code></span>: <code>command</code>가 'F'일 경우 이 아래의 코드를 실행하고, <code>break;</code>를 만나면 <code>switch</code>문을 빠져나갑니다.</li>
            <li><span class="highlight"><code>currentMotorSpeed += 20;</code></span>: 현재 속도에 20을 더하는 연산자예요. <code>currentMotorSpeed = currentMotorSpeed + 20;</code>와 같은 의미입니다.</li>
            <li><span class="highlight"><code>if (currentMotorSpeed > 255) currentMotorSpeed = 255;</code></span>: 속도 값이 255를 넘지 않도록 제한하는 코드입니다. 최소 속도 0도 마찬가지로 제한합니다.</li>
        </ul>

        <h3>✅ 4. 결과 확인 및 RC카 조종</h3>
        <ol>
            <li>아두이노에 코드를 업로드하기 전에 **블루투스 모듈의 RXD, TXD 핀 연결을 분리**합니다.</li>
            <li>코드를 업로드한 후, 다시 블루투스 모듈 핀을 연결하고, 모든 모터와 서보 모터의 전원이 제대로 연결되었는지 확인합니다.</li>
            <li>스마트폰 앱 **"Arduino Bluetooth Controller"**를 실행하고, 블루투스 모듈에 연결합니다.
                <ul>
                    <li>앱 설정에서 버튼을 위에서 정의한 프로토콜(F, B, S, L, R, C, X, Z)에 맞게 설정합니다. (예: 'F' 버튼에는 'F' 문자열 전송)</li>
                    <li>조이스틱 컨트롤도 가능하지만, 초기에는 버튼으로 정확한 명령을 보내는 것을 추천합니다.</li>
                </ul>
            </li>
            <li>스마트폰 앱의 버튼을 눌러 RC카가 전진, 후진, 정지, 좌우 조향, 속도 조절 등의 동작을 수행하는지 확인합니다.</li>
        </ol>
        <p class="caution"><b>중요!</b> DC 모터의 회전 방향이 앱의 전진/후진 명령과 맞지 않을 경우, 해당 모터에 연결된 <code>INx</code> 핀의 <code>HIGH</code>/<code>LOW</code> 설정을 코드에서 바꿔주세요. 예를 들어, <code>digitalWrite(motor1_IN1, HIGH); digitalWrite(motor1_IN2, LOW);</code>를 <code>digitalWrite(motor1_IN1, LOW); digitalWrite(motor1_IN2, HIGH);</code>로 변경하는 식입니다.</p>

        <div class="project-idea">
            <h4>⭐ 스스로 해보기!</h4>
            <ul>
                <li>스마트폰 앱의 조이스틱 기능을 활용하여 RC카를 더 부드럽게 조종해 보세요. (조이스틱은 보통 X, Y 좌표 값을 문자열로 보냅니다. 이를 파싱하여 속도와 각도로 변환하는 로직이 필요해요.)</li>
                <li>블루투스 앱에 경적 버튼을 추가하여 부저를 울리거나, RC카 라이트를 켜고 끄는 버튼을 추가해 보세요. (2주차 부저, 1주차 LED 코드 활용!)</li>
                <li>블루투스로 속도 값을 직접 보내서(<code>analogWrite(..., receivedSpeed);</code>) 더 세밀한 속도 제어를 시도해 보세요. (앱에서 슬라이더 등을 이용)</li>
            </ul>
        </div>

        <hr>

        <h2>❓ 궁금증 해결 시간</h2>
        <p>오늘 RC카를 무선으로 조종할 수 있는 블루투스 통신 기술을 배웠고, 지금까지 배운 모든 기능을 통합하여 실제 RC카를 조종하는 코드를 완성했어요. 이제 여러분의 RC카는 완전한 무선 조종 차량이 되었답니다! 혹시 이해가 잘 안 되거나 더 궁금한 점이 있나요? 무엇이든 질문해주세요!</p>

        <hr>

        <p>축하합니다! 아두이노 RC카 만들기 프로젝트의 다섯 번째 주도 성공적으로 마쳤어요. RC카의 가장 핵심 기능인 무선 조종을 구현해냈으니, 이제 RC카는 여러분의 명령에 따라 움직이는 멋진 로봇이 되었답니다. 다음 시간에는 RC카에 더욱 똑똑한 기능을 부여하는 '자율 주행'의 기초를 다져볼 거예요. 오늘 배운 블루투스 통신과 통합 제어 개념들을 잘 기억하고, 스스로 해보기 미션도 꼭 도전해 보세요!</p>
    </div>
</body>
</html>
