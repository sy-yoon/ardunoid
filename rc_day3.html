<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아두이노 RC카 교실 3주차 교재: RC카 '이동' 능력 부여하기</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 20px;
            background-color: #f8f8f8;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 40px;
            font-size: 2.2em;
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
            margin-top: 35px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
            margin-bottom: 12px;
            font-size: 1.4em;
        }
        h4 {
            color: #1a5276;
            margin-top: 15px;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        ul {
            list-style-type: disc;
            margin-left: 25px;
            margin-bottom: 15px;
        }
        ol {
            list-style-type: decimal;
            margin-left: 25px;
            margin-bottom: 15px;
        }
        b {
            color: #e74c3c; /* 강조 색상 */
            font-weight: bold;
        }
        .highlight {
            background-color: #eaf6ff;
            padding: 2px 5px;
            border-radius: 3px;
        }
        pre {
            background-color: #ecf0f1;
            padding: 18px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.95em;
            margin-bottom: 20px;
            border: 1px solid #c0d8e8;
        }
        code {
            font-family: 'Consolas', 'Courier New', monospace;
            background-color: #e0e0e0;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .note {
            background-color: #fdf6e3;
            border-left: 5px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .project-idea {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .task {
            background-color: #e0f2f7;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .image-container {
            text-align: center;
            margin: 30px 0;
        }
        .image-container img {
            max-width: 90%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .caution {
            color: #c0392b;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 아두이노 RC카 교실 3주차 교재: RC카 '이동' 능력 부여하기</h1>

        <hr>

        <h2>💡 이번 주 학습 목표</h2>
        <ul>
            <li>지난주에 배운 **DC 모터 제어**를 RC카의 바퀴에 적용하여 **전진, 후진, 정지** 기능을 구현해요.</li>
            <li>**PWM**을 활용하여 **DC 모터의 속도를 섬세하게 조절**하는 방법을 익혀요.</li>
            <li>RC카의 방향 전환을 담당하는 **서보 모터**의 원리를 이해하고, 아두이노로 정밀하게 제어하는 방법을 배워요.</li>
            <li>모터 제어 코드를 조합하여 RC카의 **기본적인 주행**을 테스트해요.</li>
        </ul>

        <hr>

        <h2>1회차: DC 모터 속도 제어 & RC카 기본 구동 테스트</h2>

        <h3>🏎️ 1. DC 모터 속도 제어 심화: PWM 활용</h3>
        <p>지난주에는 <code>digitalWrite()</code> 함수로 DC 모터를 켜고 끄거나 방향을 바꿨어요. 하지만 RC카는 단순히 움직이는 것을 넘어, 속도 조절이 가능해야겠죠? 1주차에 LED 밝기 조절에 사용했던 **PWM(Pulse Width Modulation)**을 DC 모터에도 똑같이 적용할 수 있답니다.</p>
        <p>모터 드라이버의 **ENA (또는 ENB)** 핀에 PWM 신호를 보내면, 모터에 공급되는 전력의 평균을 조절하여 모터의 회전 속도를 바꿀 수 있어요. <code>analogWrite()</code> 함수를 사용하여 0(정지)부터 255(최고 속도)까지의 값으로 모터 속도를 제어할 수 있습니다.</p>
        <div class="image-container">
            <img src="pwm_motor_speed.png" alt="PWM을 이용한 모터 속도 조절 원리">
            <p><i>(PWM을 이용해 모터의 속도를 조절하는 원리를 시각적으로 보여주는 다이어그램을 삽입해 주세요. 듀티 사이클에 따라 모터의 평균 전압이 달라지는 것을 나타내면 좋습니다.)</i></p>
        </div>

        <h3>🔌 2. 회로 연결하기: 2개의 DC 모터와 L298N 연결</h3>
        <p>RC카에는 보통 두 개의 뒷바퀴 모터(2WD) 또는 네 개의 모터(4WD)가 사용돼요. 이번에는 L298N 모터 드라이버의 두 채널을 모두 사용해서 두 개의 DC 모터를 각각 제어할 수 있도록 연결해 볼 거예요.</p>
        <h4>준비물:</h4>
        <ul>
            <li>아두이노 우노 보드</li>
            <li>L298N 모터 드라이버 모듈 1개</li>
            <li>DC 모터 2개 (RC카 섀시 키트에 포함된 모터)</li>
            <li>9V 건전지 및 건전지 스냅 (또는 6V~12V 외부 전원)</li>
            <li>점퍼선 (수-수)</li>
        </ul>
        <h4>회로 연결 순서:</h4>
        <ol>
            <li>**모터 드라이버 전원 연결**:
                <ul>
                    <li>9V 건전지 스냅의 **빨간색 선(+)**을 L298N 모듈의 **+12V (또는 +VCC) 핀**에 연결합니다.</li>
                    <li>9V 건전지 스냅의 **검은색 선(-)**을 L298N 모듈의 **GND 핀**에 연결합니다.</li>
                </ul>
            </li>
            <li>**아두이노-모터 드라이버 접지 연결**:
                <ul>
                    <li>아두이노의 **GND 핀**에서 점퍼선을 연결하여 L298N 모듈의 **GND 핀**에 연결합니다. (**매우 중요! 접지를 공유해야 합니다.**)</li>
                </ul>
            </li>
            <li>**첫 번째 DC 모터 연결 (좌측 바퀴 모터)**:
                <ul>
                    <li>첫 번째 DC 모터의 두 선을 L298N 모듈의 **OUT1**과 **OUT2** 핀에 연결합니다.</li>
                </ul>
            </li>
            <li>**두 번째 DC 모터 연결 (우측 바퀴 모터)**:
                <ul>
                    <li>두 번째 DC 모터의 두 선을 L298N 모듈의 **OUT3**과 **OUT4** 핀에 연결합니다.</li>
                </ul>
            </li>
            <li>**아두이노-모터 드라이버 제어 핀 연결**:
                <ul>
                    <li>아두이노의 **디지털 핀 7번**을 L298N 모듈의 **IN1 핀**에 연결합니다.</li>
                    <li>아두이노의 **디지털 핀 6번**을 L298N 모듈의 **IN2 핀**에 연결합니다.</li>
                    <li>아두이노의 **디지털 핀 5번**을 L298N 모듈의 **IN3 핀**에 연결합니다.</li>
                    <li>아두이노의 **디지털 핀 4번**을 L298N 모듈의 **IN4 핀**에 연결합니다.</li>
                    <li>아두이노의 **디지털 핀 9번** (PWM 지원 핀)을 L298N 모듈의 **ENA 핀**에 연결합니다.</li>
                    <li>아두이노의 **디지털 핀 10번** (PWM 지원 핀)을 L298N 모듈의 **ENB 핀**에 연결합니다.</li>
                </ul>
            </li>
        </ol>
        <div class="image-container">
            <img src="arduino_l298n_two_motors_circuit.png" alt="아두이노 L298N 두 개 DC 모터 연결 회로도">
            <p><i>(아두이노, L298N 모터 드라이버, 두 개의 DC 모터, 9V 배터리가 연결된 정확한 회로도 이미지를 삽입해 주세요. 각 핀의 연결을 명확히 보여주세요.)</i></p>
        </div>
        <p class="caution"><b>주의!</b> 모터 드라이버에 외부 전원(9V 배터리 등)을 연결할 때 반드시 극성을 확인하세요. 잘못 연결하면 모듈이 손상될 수 있습니다.</p>

        <h3>📝 3. 코딩하기: RC카 기본 주행 (전진, 후진, 정지) & 속도 조절</h3>
        <p>이제 두 개의 모터를 동시에 제어하여 RC카를 움직여 봅시다. 모터의 회전 방향을 잘 조합하면 전진, 후진, 좌회전, 우회전 등 다양한 움직임을 만들 수 있어요. 여기서는 전진, 후진, 정지 기능을 구현할 거예요.</p>
        <pre><code class="language-cpp">// 아두이노 RC카 교실 - 3주차 1회차: RC카 기본 주행 (전진, 후진, 정지)

// 모터 1 (OUT1, OUT2 - 보통 왼쪽 바퀴)
const int motor1_IN1 = 7; 
const int motor1_IN2 = 6;
const int motor1_ENA = 9; // PWM 지원 핀

// 모터 2 (OUT3, OUT4 - 보통 오른쪽 바퀴)
const int motor2_IN3 = 5;
const int motor2_IN4 = 4;
const int motor2_ENB = 10; // PWM 지원 핀

// 모터 속도 (0~255, 255가 최대 속도)
int motorSpeed = 200; // 초기 속도 설정

void setup() {
  Serial.begin(9600);
  Serial.println("RC카 기본 주행 테스트 시작!");

  // 모터 1 제어 핀들을 출력 모드로 설정
  pinMode(motor1_IN1, OUTPUT);
  pinMode(motor1_IN2, OUTPUT);
  pinMode(motor1_ENA, OUTPUT);

  // 모터 2 제어 핀들을 출력 모드로 설정
  pinMode(motor2_IN3, OUTPUT);
  pinMode(motor2_IN4, OUTPUT);
  pinMode(motor2_ENB, OUTPUT);

  // 초기 상태: 모든 모터 정지
  stopMotors();
}

void loop() {
  Serial.println("전진!");
  moveForward();
  delay(3000); // 3초 동안 전진

  Serial.println("정지!");
  stopMotors();
  delay(2000); // 2초 동안 정지

  Serial.println("후진!");
  moveBackward();
  delay(3000); // 3초 동안 후진

  Serial.println("정지!");
  stopMotors();
  delay(2000); // 2초 동안 정지
}

// RC카 전진 함수
void moveForward() {
  // 왼쪽 바퀴 전진
  digitalWrite(motor1_IN1, HIGH);
  digitalWrite(motor1_IN2, LOW);
  analogWrite(motor1_ENA, motorSpeed);

  // 오른쪽 바퀴 전진
  // 모터 연결에 따라 방향이 반대일 수 있으므로, 실제 RC카에서 테스트 후 방향 조절
  digitalWrite(motor2_IN3, HIGH); 
  digitalWrite(motor2_IN4, LOW);
  analogWrite(motor2_ENB, motorSpeed);
}

// RC카 후진 함수
void moveBackward() {
  // 왼쪽 바퀴 후진
  digitalWrite(motor1_IN1, LOW);
  digitalWrite(motor1_IN2, HIGH);
  analogWrite(motor1_ENA, motorSpeed);

  // 오른쪽 바퀴 후진
  // 모터 연결에 따라 방향이 반대일 수 있으므로, 실제 RC카에서 테스트 후 방향 조절
  digitalWrite(motor2_IN3, LOW); 
  digitalWrite(motor2_IN4, HIGH);
  analogWrite(motor2_ENB, motorSpeed);
}

// RC카 정지 함수
void stopMotors() {
  digitalWrite(motor1_IN1, LOW);
  digitalWrite(motor1_IN2, LOW);
  analogWrite(motor1_ENA, 0); // PWM 값을 0으로 주어 완전히 정지 (브레이크 효과)

  digitalWrite(motor2_IN3, LOW);
  digitalWrite(motor2_IN4, LOW);
  analogWrite(motor2_ENB, 0); // PWM 값을 0으로 주어 완전히 정지 (브레이크 효과)
}
</code></pre>
        <h4>코딩 용어 상세 설명:</h4>
        <ul>
            <li><span class="highlight"><code>moveForward()</code></span>, <span class="highlight"><code>moveBackward()</code></span>, <span class="highlight"><code>stopMotors()</code></span>: 모터 제어 코드를 각각의 **함수**로 만들어서 코드를 더 깔끔하고 이해하기 쉽게 만들었어요. 이렇게 함수로 만들어두면 나중에 이 동작들을 필요할 때마다 호출해서 사용할 수 있습니다.</li>
            <li><span class="highlight"><code>motorSpeed</code></span>: 모터의 PWM 값을 저장하는 변수예요. 이 값을 0~255 사이로 조절하여 RC카의 속도를 변경할 수 있습니다.</li>
            <li>**좌회전/우회전 힌트**: 한쪽 바퀴는 전진, 다른 쪽 바퀴는 정지 또는 후진하면 RC카가 회전할 수 있어요. 예를 들어, `왼쪽 바퀴 전진`, `오른쪽 바퀴 정지` 하면 왼쪽으로 커브를 돌게 된답니다.</li>
        </ul>

        <h3>✅ 4. 결과 확인</h3>
        <ol>
            <li>코드를 아두이노에 업로드합니다.</li>
            <li>모터가 연결된 바퀴가 전진(같은 방향 회전), 정지, 후진(반대 방향 회전), 정지를 반복하는지 확인합니다.</li>
            <li>**만약 모터 방향이 예상과 다르다면**, 해당 모터에 연결된 <code>INx</code> 핀의 <code>HIGH</code>와 <code>LOW</code>를 서로 바꿔주세요. 예를 들어 <code>digitalWrite(motor2_IN3, HIGH); digitalWrite(motor2_IN4, LOW);</code>를 <code>digitalWrite(motor2_IN3, LOW); digitalWrite(motor2_IN4, HIGH);</code>로 변경하는 식입니다.</li>
            <li><code>motorSpeed</code> 값을 변경해가며 RC카의 속도 변화를 관찰해 보세요.</li>
        </ol>
        <div class="project-idea">
            <h4>⭐ 스스로 해보기!</h4>
            <ul>
                <li><code>moveLeft()</code>와 <code>moveRight()</code> 함수를 추가하여 RC카가 좌회전, 우회전할 수 있도록 코드를 수정해 보세요. (힌트: 한쪽 바퀴는 전진, 다른 쪽 바퀴는 정지/후진)</li>
                <li>RC카 섀시에 모터를 실제로 장착하고 바퀴를 연결하여 RC카가 직접 움직이는 것을 확인해 보세요.</li>
                <li>버튼을 추가하여 버튼을 누르면 전진, 후진, 정지, 좌회전, 우회전하는 기능을 만들어 보세요.</li>
            </ul>
        </div>

        <hr>
        <br>

        <h2>2회차: 서보 모터로 '조향' 연습하기</h2>

        <h3>📐 1. 서보 모터란 무엇일까요?</h3>
        <p>DC 모터가 계속해서 한 방향으로 회전하는 모터라면, **서보 모터(Servo Motor)**는 특정 각도로 정확하게 움직이는 모터예요. RC카에서 앞바퀴의 방향을 조절하는 **조향 장치**나 센서의 방향을 바꾸는 용도로 사용됩니다. 보통 0도에서 180도 사이의 각도로 움직일 수 있어요.</p>
        <div class="image-container">
            <img src="sg90_servo_motor.png" alt="SG90 서보 모터 이미지">
            <p><i>(SG90 미니 서보 모터의 실제 사진 또는 핀 명칭이 표시된 다이어그램을 삽입해 주세요. (갈색/검은색: GND, 빨간색: 5V, 주황색/노란색: 신호선))</i></p>
        </div>
        <h4>서보 모터의 핀 구성:</h4>
        <ul>
            <li>**전원(VCC)**: 보통 빨간색 선, 아두이노의 5V 핀에 연결.</li>
            <li>**접지(GND)**: 보통 갈색 또는 검은색 선, 아두이노의 GND 핀에 연결.</li>
            <li>**신호(Signal)**: 보통 주황색 또는 노란색 선, 아두이노의 디지털 핀(PWM 지원 핀이 아니어도 됨)에 연결.</li>
        </ul>

        <h3>🔌 2. 회로 연결하기: 서보 모터 제어</h3>
        <p>서보 모터는 아두이노의 디지털 핀 하나에 신호선을 연결하여 제어할 수 있어요. 아두이노 라이브러리를 사용하면 복잡한 PWM 신호 생성 없이도 각도 값을 보내 서보 모터를 쉽게 제어할 수 있습니다.</p>
        <h4>준비물:</h4>
        <ul>
            <li>아두이노 우노 보드</li>
            <li>브레드보드</li>
            <li>서보 모터 (SG90 미니 서보 모터 권장) 1개</li>
            <li>점퍼선 (수-수)</li>
        </ul>
        <h4>회로 연결 순서:</h4>
        <ol>
            <li>**브레드보드 전원 연결**: (1회차와 동일)
                <ul>
                    <li>아두이노의 **GND 핀**에서 브레드보드의 **파란색 (-) 라인**에 연결합니다.</li>
                    <li>아두이노의 **5V 핀**에서 브레드보드의 **빨간색 (+) 라인**에 연결합니다.</li>
                </ul>
            </li>
            <li>**서보 모터 연결**:
                <ul>
                    <li>서보 모터의 **빨간색 선(VCC)**을 브레드보드의 **빨간색 (+) 라인(5V)**에 연결합니다.</li>
                    <li>서보 모터의 **갈색/검은색 선(GND)**을 브레드보드의 **파란색 (-) 라인(GND)**에 연결합니다.</li>
                    <li>서보 모터의 **주황색/노란색 선(신호)**을 아두이노의 **디지털 핀 3번**에 연결합니다. (3번 핀은 PWM 지원 핀이지만, 서보 라이브러리는 모든 디지털 핀에서 작동할 수 있습니다.)</li>
                </ul>
            </li>
        </ol>
        <div class="image-container">
            <img src="arduino_servo_motor_circuit.png" alt="아두이노 서보 모터 연결 회로도">
            <p><i>(아두이노, 브레드보드, 서보 모터가 연결된 정확한 회로도 이미지를 삽입해 주세요. 각 선의 색깔과 핀 연결을 명확히 보여주세요.)</i></p>
        </div>
        <p class="caution"><b>주의!</b> 서보 모터의 전원(VCC)과 신호선(Signal)을 바꿔 연결하면 서보 모터나 아두이노에 손상이 갈 수 있으니 꼭 색깔을 확인하고 연결해 주세요.</p>

        <h3>📝 3. 코딩하기: 서보 모터 각도 제어</h3>
        <p>아두이노에서 서보 모터를 쉽게 제어하기 위해 **<code>Servo.h</code> 라이브러리**를 사용해요. 이 라이브러리를 사용하면 복잡한 PWM 신호 생성 없이도 원하는 각도를 숫자로 입력하여 서보 모터를 움직일 수 있습니다.</p>
        <pre><code class="language-cpp">// 아두이노 RC카 교실 - 3주차 2회차: 서보 모터 각도 제어 예제

// Servo 라이브러리 포함 (아두이노 IDE에 기본 포함되어 있어요)
#include &lt;Servo.h&gt; 

Servo myServo; // Servo 객체(변수)를 생성합니다. 'myServo'라는 이름으로 서보 모터를 제어할 거예요.

const int servoPin = 3; // 서보 모터의 신호선이 연결된 디지털 핀 번호

void setup() {
  Serial.begin(9600);
  Serial.println("서보 모터 제어 시작!");

  // myServo 객체를 servoPin (3번 핀)에 연결합니다.
  // 이제 3번 핀을 통해 서보 모터를 제어할 수 있습니다.
  myServo.attach(servoPin); 

  // 초기 각도 설정 (0도 또는 원하는 시작 각도)
  myServo.write(0); 
  delay(1000);
}

void loop() {
  Serial.println("서보 0도로 이동");
  myServo.write(0); // 서보 모터를 0도로 움직입니다.
  delay(2000);      // 2초 동안 기다립니다.

  Serial.println("서보 90도로 이동");
  myServo.write(90); // 서보 모터를 90도로 움직입니다.
  delay(2000);

  Serial.println("서보 180도로 이동");
  myServo.write(180); // 서보 모터를 180도로 움직입니다.
  delay(2000);
}
</code></pre>
        <h4>코딩 용어 상세 설명:</h4>
        <ul>
            <li><span class="highlight"><code>#include &lt;Servo.h&gt;</code></span>: 서보 모터를 제어하기 위해 필요한 **라이브러리**를 불러오는 명령어입니다. 라이브러리는 특정 기능을 쉽게 사용할 수 있도록 미리 만들어진 코드들의 모음이에요.</li>
            <li><span class="highlight"><code>Servo myServo;</code></span>: <code>Servo</code> 타입의 <code>myServo</code>라는 이름의 **객체(Object)**를 생성하는 코드예요. 앞으로 <code>myServo.</code> 뒤에 함수를 붙여서 서보 모터를 제어할 거예요.</li>
            <li><span class="highlight"><code>myServo.attach(핀번호);</code></span>: <code>myServo</code> 객체를 아두이노의 특정 핀에 **연결(Attach)**합니다. 이 핀을 통해 서보 모터에 제어 신호가 나갑니다.</li>
            <li><span class="highlight"><code>myServo.write(각도);</code></span>: 서보 모터를 원하는 **각도(0~180)**로 움직이게 하는 함수입니다. 입력 값은 정수여야 합니다.</li>
        </ul>

        <h3>✅ 4. 결과 확인</h3>
        <ol>
            <li>코드를 아두이노에 업로드합니다.</li>
            <li>서보 모터의 축이 0도, 90도, 180도로 움직임을 반복하는지 확인합니다.</li>
        </ol>
        <div class="project-idea">
            <h4>⭐ 스스로 해보기!</h4>
            <ul>
                <li><code>myServo.write()</code>의 값을 바꿔가며 서보 모터가 움직이는 각도를 조절해 보세요.</li>
                <li>1주차에서 배운 **가변 저항**을 사용하여 가변 저항을 돌리면 서보 모터의 각도가 변하도록 만들어 보세요. (아날로그 입력 값을 <code>map()</code> 함수로 0~180 범위로 변환하여 <code>myServo.write()</code>에 입력)</li>
                <li>**푸시 버튼 스위치**를 이용해서 버튼을 누를 때마다 서보 모터가 특정 각도로 움직이도록 만들어 보세요. (예: 왼쪽 버튼 누르면 45도, 오른쪽 버튼 누르면 135도)</li>
            </ul>
        </div>

        <hr>

        <h2>❓ 궁금증 해결 시간</h2>
        <p>오늘 RC카의 이동을 만드는 두 개의 DC 모터를 동시에 제어하고 속도까지 조절하는 방법을 배웠어요. 또, 방향 전환에 필요한 서보 모터의 제어도 익혔죠. 혹시 이해가 잘 안 되거나 더 궁금한 점이 있나요? 무엇이든 질문해주세요!</p>

        <hr>

        <p>축하합니다! 아두이노 RC카 만들기 프로젝트의 세 번째 주도 성공적으로 마쳤어요. 이제 RC카가 앞으로 가고, 뒤로 가고, 멈추고, 심지어 방향까지 조절할 수 있는 기본적인 능력을 갖추게 되었답니다. 다음 시간에는 RC카의 '눈'과 '귀'가 되어줄 센서들을 연결하고 사용하는 방법을 배워볼 거예요. 오늘 배운 개념들을 잘 기억하고, 스스로 해보기 미션도 꼭 도전해 보세요!</p>
    </div>
</body>
</html>
